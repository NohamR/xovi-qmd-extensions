; credit for the original clock implementation: https://github.com/StarNumber12046/xovi-qmd-extensions/blob/main/quickSettingsClock.qmd
AFFECT [[12542166428983872557]] 
    IMPORT [[7082573613689.5972775.6504315758]] [[180922.180921]]

    TRAVERSE [[7711468349764991]] > [[6502786168]] > [[8397788359424131273]] > [[14125623155555875541]] > [[6502786168]] > [[254501558939456351]]#[[254548156692664613]]

        LOCATE BEFORE [[3875623948647577544]]#[[6090168079272128033]]
        INSERT {
            ~&14397210151462632996&~ {
                ~&5972374&~: quickSettingsClock

                property ~&6503679477&~ showSeconds: ~&214625660372&~
                property ~&7083178290016&~ minuteFormat: "dd/MM hh:mm"
                property ~&7083178290016&~ secondFormat: "dd/MM hh:mm:ss"
                property ~&197088788&~ minuteInterval: 60000
                property ~&197088788&~ secondInterval: 1000
                property ~&197088788&~ cestOffset: 1 * 3600000

                ~&6504315758&~: ~&5971598&~.~&6460516198169535423&~(getCestTime(), minuteFormat)

                function getCestTime() {
                    ~&197102514&~ now =        new        ~&6502586279&~();
                    ; to add a timezone:
                    ; ~&197102514&~ utc = now.getTime() + (now.getTimezoneOffset() * 60000);
                    ~&197102514&~ utc = now.getTime();
                    ~&7083121450889&~        new        ~&6502586279&~(utc + cestOffset);
                }

                function updateClock() {
                    ~&6504315758&~ = ~&5971598&~.~&6460516198169535423&~(getCestTime(), showSeconds ? secondFormat : minuteFormat);
                }

                ~&254480451320573660&~.~&495334332051582499&~: {
                    updateClock();
                }

                onShowSecondsChanged: {
                    quickSettingsClockTimer.~&233743006639214&~();
                    updateClock();
                }

                ~&214604601930&~ {
                    ~&5972374&~: quickSettingsClockTimer
                    ~&7713147298280334&~: quickSettingsClock.showSeconds ? quickSettingsClock.secondInterval : quickSettingsClock.minuteInterval
                    ~&7083121289162&~: ~&6504329801&~
                    ~&233743626668842&~: ~&6504329801&~

                    ~&495358363329399331&~: {
                        quickSettingsClock.updateClock();
                    }
                }

                ~&254494525842443467&~ {
                    ~&233721384511543&~.~&6503816592&~: ~&7083038346995&~
                    ~&477346538929698200&~: ~&5971598&~.PointingHandCursor
                    ~&254542236275632405&~: {
                        quickSettingsClock.showSeconds = !quickSettingsClock.showSeconds;
                    }
                }
            }
        }

    END TRAVERSE

END AFFECT